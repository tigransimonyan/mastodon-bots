const megalodon = require('megalodon');
const lunarphase = require('lunarphase-js');
const generator = megalodon.default;

const BASE_URL = 'https://xn--y9a6bah4ck.xn--y9a3aq';
const ACCESS_TOKEN = process.env.ACCESS_TOKEN;

const client = generator('mastodon', BASE_URL, ACCESS_TOKEN);
const tips = [
  'Õ€Õ¡Õ¯Õ¡Õ½Õ¸Ö‚Õ©Õ«Ö‚Õ¶Õ¶Õ¥Ö€Õ¨ Õ¡Õ´Õ¥Õ¶Õ¸Ö‚Ö€ Õ¥Õ¶',
  'Ô¶Õ£Õ¡ÖÕ´Õ¸Ö‚Õ¶Ö„Õ¶Õ¥Ö€Õ¨ Õ¡Ö€ÕªÕ¥Ö‚Õ¸Ö€Ö‚Õ´ Õ¥Õ¶ ÖƒÕ¸Ö€Õ±Õ¡Õ¼Õ¸Ö‚Õ©Õ«Ö‚Õ¶Õ¨',
  'Ô´Õ¡Õ¤Õ¡Ö€Õ«Ö€ Õ¨Õ¶Õ¿Ö€Õ¥Õ¬ Õ¡ÕµÕ¶ Õ«Õ¶Õ¹Õ¨ Ö„Õ¥Õ¦ Õ¹Õ« Õ¨Õ¶Õ¿Ö€Õ¸Ö‚Õ´',
  'Õ„Õ«Õ¡ÕµÕ¶ Ö„Õ¥Õ¦ Õ¶Õ´Õ¡Õ¶ Õ¬Õ«Õ¶Õ¥Õ¬Õ¸Õ¾ Õ¯Õ¡Ö€Õ¸Õ² Õ¥Õ½ Õ£Ö€Õ¡Ö‚Õ¥Õ¬ Õ³Õ«Õ·Õ¿ Õ´Õ¡Ö€Õ¤Õ¯Õ¡Õ¶Ö',
  'Õ„Õ« Õ¶Õ¸ÕµÕ¶Õ¡Õ¯Õ¡Õ¶Õ¡ÖÕ«Ö€ Ö„Õ¥Õ¦ Õ½Õ¡Õ°Õ´Õ¡Õ¶Õ¡ÖƒÕ¡Õ¯Õ¸Õ² Õ¢Õ¡Õ¶Õ¥Ö€Õ« Õ°Õ¥Õ¿',
  'Ô±Õ¦Õ¡Õ¿Õ¸Ö‚Õ«Ö€ Õ¯Õ¡Õ²Õ¡ÕºÕ¡Ö€Õ¶Õ¥Ö€Õ«Ö, Õ¸Ö€Õ¸Õ¶Ö„ Õ¡ÕµÕ¬Õ¥Ö‚Õ½ Õ¹Õ¥Õ¶ Ö…Õ£Õ¶Õ¸Ö‚Õ´ Ö„Õ¥Õ¦',
  'Ô´Õ¸Ö‚ Õ¯Õ¡Ö€Õ¸Õ² Õ¥Õ½ ÖÕ¡Õ¶Õ¯Õ¡Õ¶Õ¡Õ¬ Õ´Õ«Õ¡ÕµÕ¶ Õ¡ÕµÕ¶ Õ«Õ¶Õ¹ Õ£Õ«Õ¿Õ¥Õ½',
  'Õ†Õ¯Õ¡Õ¿Õ«Ö€ Õ©Õ¥ Õ«Õ¶Õ¹Õ¶ Õ§ Õ·Õ¥Õ²Õ¸Ö‚Õ´ Ö„Õ¥Õ¦, Õ¨Õ¶Õ¤Õ¸Ö‚Õ¶Õ«Ö€ Õ¸Ö‚ Õ¢Õ¡Ö Õ©Õ¸Õ²',
  'Ô¸Õ¶Õ¤Õ¸Ö‚Õ¶Õ«Ö€ Ö„Õ¥Õ¦',
  'Ô´Õ¸Ö‚ Õ¯Õ¡Ö€Õ¸Õ² Õ¥Õ½ Õ¡ÕºÖ€Õ¥Õ¬ Õ´Õ¿Ö„Õ¥Ö€Õ« Õ´Õ§Õ» Õ­Õ¸Ö€Õ¡Õ½Õ¸Ö‚Õ¦Õ¸Ö‚Õ¡Õ® Õ¯Õ¡Õ´ Õ¡ÕºÖ€Õ¥Õ¬ Õ¶Õ¥Ö€Õ¯Õ¡ÕµÕ¸Ö‚Õ´',
  'Ô´Õ¸Ö‚ Õ¹Õ¥Õ½ Õ¯Õ¡Ö€Õ¸Õ² Õ¯Õ¡Õ¼Õ¡Ö‚Õ¡Ö€Õ¥Õ¬ Õ®Õ¸Õ¾Õ« Õ¡Õ¬Õ«Ö„Õ¶Õ¥Ö€Õ¨, Õ¢Õ¡ÕµÖ Õ¯Õ¡Ö€Õ¸Õ² Õ¥Õ½ Õ½Õ¡Õ°Õ¥Õ¬ Õ¤Ö€Õ¡Õ¶Ö Õ¾Ö€Õ¡ÕµÕ¸Õ¾',
  'Õ€Õ«Õ´Õ¡ Õ¬Õ¡Ö‚ ÕºÕ¡Õ° Õ§ Õ¶Õ¥Ö€Õ¯Õ¡Õµ Õ¬Õ«Õ¶Õ¥Õ¬Õ¸Ö‚Ö‰ Õ€Õ«Õ´Õ¡ Õ¶Õ¸ÕµÕ¶ÕºÕ§Õ½Ö‰ Õ€Õ«Õ´Õ¡ Õ§Õ¬Ö‰',
  'Õ•Õ£Õ¶Õ¸Ö‚Õ©Õ«Ö‚Õ¶ Õ­Õ¶Õ¤Ö€Õ«Ö€',
  'Ô±ÕµÕ¶ Õ«Õ¶Õ¹Õ¨ Õ¹Õ¥Õ½ ÖƒÕ¸Õ­Õ¸Ö‚Õ´ Õ¨Õ¶Õ¿Ö€Õ¸Ö‚Õ´ Õ¥Õ½',
  'ÔµÖ€Õ¥Õ¯Õ¸ÕµÕ¥Õ¡Õ¶ Õ¤Õ¸Ö‚Ö€Õ½ Õ¡Ö€Õ« Ö„Õ¥Õ¦ Õ°Õ¥Õ¿ Õ¨Õ¶Õ©Ö€Õ¥Õ¬Õ¸Ö‚',
  'Ô´Õ¸Ö‚ Õ¸Ö‚Õ¶Õ¥Õ½ Õ¶Õ¸Ö‚Õ§Ö€Õ¶Õ¥Ö€ Õ¸Ö€Õ¸Õ¶Ö„ Õ¹Õ¥Õ½ Ö…Õ£Õ¿Õ¡Õ£Õ¸Ö€Õ®Õ¸Ö‚Õ´',
  'ÔµÖ€Õ¢Õ¥Õ´Õ¶ Õ´Õ¡Ö€Õ¤Õ«Õ¯ Õ£Õ¡Õ¬Õ«Õ½ Õ¥Õ¶ ÖÕ¸ÕµÖ Õ¿Õ¡Õ¬Õ¸Ö‚ Õ¡ÕµÕ¶, Õ«Õ¶Õ¹ Õ¹Õ¥Õ½ Õ¸Ö‚Õ¦Õ¸Ö‚Õ´',
  'Ô»Ö€Õ¡Õ¯Õ¡Õ¶ Õ¨Õ¶Õ¯Õ¥Ö€Õ¶Õ¥Ö€Õ¨ Õ¹Õ¥Õ¶ Õ¾Õ¡Õ­Õ¥Õ¶Õ¸Ö‚Õ´ Õ´Õ¡Ö€Õ¿Õ¡Õ°Ö€Õ¡Ö‚Õ§Ö€ Õ¶Õ¥Õ¿Õ¥Õ¬',
  'Õ„Õ«Õ¡ÖÖ€Õ¸Ö‚ Õ¥Ö€Õ£, Õ¸Ö€Õ¨ Õ¯Õ¨ ÕµÕ«Õ·Õ¥ÖÕ¶Õ« Õ©Õ¥ Õ¸Õ¾ Õ¥Õ½',
  'Ô´Õ¸Ö‚ Õ¹Õ¥Õ½ Õ¯Õ¸Õ¿Ö€Õ¸Ö‚Õ¥Õ¬',
  'Ô³Õ¶Õ«Ö€ Õ¶Õ¸Ö€ Õ°Õ¡Õ£Õ¸Ö‚Õ½Õ¿',
  'Ô´Õ¸Ö‚ Õ¡Õ´Õ§Õ¶ Õ´Õ§Õ¯Õ« Õ°Õ¡Õ´Õ¡Ö€ Õ¹Õ¥Õ½',
  'Ô³Ö€Õ«Ö€ Õ½Õ«Ö€Õ¡ÕµÕ«Õ¶ ÕºÕ¸Õ¥Õ´ Ö„Õ¥Õ¦ Õ¶Õ¸Ö‚Õ«Ö€Õ¸Ö‚Õ¡Õ®',
  'Ô´Õ¡Õ¤Õ¡Ö€Õ«Ö€ Õ´Õ¥Õ²Õ¡Ö‚Õ¸Ö€ Õ¦Õ£Õ¡Õ¬ Ö„Õ¸ Õ°Õ¡Õ¶Õ¤Õ§Õº',
  'ÕÕ¸Õ¾Õ¸Ö€Õ¸Ö‚Õ©Õ«Ö‚Õ¶Õ¨ Õ¿Õ¥Õ½Õ¡Õ¶Õ¥Õ¬Õ« Õ§ Õ¤Õ¡Õ¼Õ¶Õ¸Ö‚Õ´ Õ¨Õ¶Õ¤Õ°Õ¡Õ¿Õ¥Õ¬Õ¸Ö‚Ö ÕµÕ¥Õ¿Õ¸Õµ',
  'Ô´Õ¸Ö‚ Õ¡Ö€Õ¤Õ§Õ¶ Õ¸Ö‚Õ¶Õ¥Õ½ Õ¡ÕµÕ¶ Õ«Õ¶Õ¹ Ö„Õ¥Õ¦ ÕºÕ§Õ¿Ö„ Õ§',
  'Õ“Õ¸Õ²Õ¨ Õ«Ö€Õ¡Õ¯Õ¡Õ¶ Õ¹Õ§',
  'Õ„Õ« Õ­Õ¡Õ¢Õ«Ö€ Ö„Õ¥Õ¦',
  'Õ”Õ¸ Õ½Õ«Ö€Õ¿Õ¨ Õ¯Ö€Õ¯Õ«Õ¶ Õ¸Ö‚ Õ¯Ö€Õ¯Õ«Õ¶ Õ¯Õ¸Õ¿Ö€Õ¸Ö‚Õ¥Õ¬Õ¸Ö‚ Õ§',
  'Ô³Ö€Õ«Ö€ Õ¡Õ¼Õ¡Õ»Õ«Õ¶Õ¨',
  'Ô±Õ·Õ­Õ¡Õ¿Õ«Ö€ Õ¡ÕµÕ½Ö…Ö€ Ö„Õ«Õ¹ Õ­Ö…Õ½Õ¥Õ¬',
  'Ô´Õ¸Ö‚ Õ¡ÕºÖ€Õ¸Ö‚Õ´ Õ¥Õ½ Õ¯Õ¸Õ¿Ö€Õ¸Ö‚Õ¡Õ® Õ½Ö€Õ¿Õ¥Ö€Õ« Õ¯Õ¸Õ²Ö„Õ«Õ¶',
  'Ô¿Õ¥Ö€Õ¡Õ¯Ö€Õ«Ö€ Õ¤Ö€Õ½Õ« Õ¯Õ¥Õ¶Õ¤Õ¡Õ¶Õ«Õ¶Õ¥Ö€Õ«Õ¶',
  'ÕÕ¸Õ¾Õ¸Ö€Õ«Ö€ Õ¶Õ¸Ö€ Õ¸Ö‚Õ¿Õ¥Õ½Õ¿ ÕºÕ¡Õ¿Ö€Õ¡Õ½Õ¿Õ¥Õ¬',
  // 'ÕÕ­Ö€Õ¸Ö‚Õ©Õ«Ö‚Õ¶Õ¨ Õ½Õ­Õ¡Õ¬ Õ¸Ö€Õ¸Õ´Õ¡Õ¶ Õ¶Õ·Õ¡Õ¶ Õ¹Õ§',
  // 'Õ€Õ¥Õ¼Õ¡ÖÕ«Ö€ Õ¡ÕµÕ¶ Õ¿Õ¥Õ²Õ«Ö, Õ¸Ö€Õ¿Õ¥Õ² Õ¥Ö€Õ»Õ¡Õ¶Õ«Õ¯ Õ¹Õ¥Õ½'
  // 'ÕÕ§Ö€Õ¨ ÕªÕ¡Õ´Õ¡Õ¶Õ¡Õ¯Õ« Õ´Õ¥Ö„Õ¥Õ¶Õ¡Õµ Õ§'
  // 'Ô¶Õ£Õ¸Ö‚Õ·Õ¡Ö‚Õ¸Ö€ Õ¬Õ«Õ¶Õ¥Õ¬Õ¨ Õ³Õ«Õ·Õ¿ Õ¸Ö€Õ¸Õ·Õ¸Ö‚Õ´ Õ§',
  // 'Ô»Õ¶Õ¹Ö„Õ¡ÕÕ¶ Õ¶Õ·Õ¡Õ¶ Õ§ Ö„Õ¥Õ¦ ÕºÕ§Õ¿Ö„ Õ°Õ¡Õ½Õ¯Õ¡Õ¶Õ¡Õ¬Õ¸Ö‚ Õ°Õ¡Õ´Õ¡Ö€',
  // 'Ô¹Õ¸ÕµÕ¬ Õ¿Õ¸Ö‚Ö€ Õ½Õ§Ö€Õ¨ Õ´Õ«Õ¡ÖÕ¶Õ« Ö„Õ¥Õ¦',
  // 'Õ”Õ¥Õ¦ Õ´Õ«Õ¡ÕµÕ¶ ÕºÕ§Õ¿Ö„ Õ§ Õ´Õ« ÖƒÕ¸Ö„Ö€ ÕµÕ¸ÕµÕ½',
  // 'Ô´Õ¡Õ¼Õ¶Õ¸Ö‚Õ©Õ«Ö‚Õ¶Õ¨ ÕºÕ§Õ¿Ö„ Õ¹Õ§ Õ¯Õ¸Ö‚Õ¿Õ¡Õ¯Õ¥Õ¬, Õ¾Õ¥Ö€Õ¡ÖÕ¸Ö‚',
];

const getRandomInt = (max) => Math.floor(Math.random() * max);

function getArrayElementByDayInYear(arr) {
  const currentDate = new Date();
  const startOfYear = new Date(currentDate.getFullYear(), 0, 1); // January 1st of the current year
  const dayInYear =
    Math.floor((currentDate - startOfYear) / (1000 * 60 * 60 * 24)) + 1;
  let index = dayInYear - 1; // Array indices start from 0, so we subtract 1 from the dayInYear.

  while (index >= arr.length) {
    index = index - arr.length;
  }

  return arr[index];
}

const postThreads = (status) => {
  let a = status.substring(0, 490);
  let b = status.substring(490);

  if (b) {
    a = a + '... ->';
  }

  client
    .postStatus(a)
    .then((response) => {
      if (!b) return response;
      return client.postStatus(b, { in_reply_to_id: response.data.id });
    })
    .then(() => console.log('Done!'))
    .catch((error) => console.log(error));
};

const post = (status) => {
  client
    .postStatus(status)
    .then(() => console.log('Done!'))
    .catch((error) => console.log(error));
};

const datetime = new Date();
const hours = datetime.getHours();

const pronouns = [
  'Õ½Õ«Ö€Õ¸Ö‚Õ¶Õ¶Õ¥Ö€ Õ»Õ¡Õ¶',
  'Õ°Õ¡Õ´Õ¸Õ¾Õ¶Õ¥Ö€ Õ»Õ¡Õ¶',
  'Õ¤Õ¡Õ´Õ¢Õ¸Ö‚Õ¬Õ¶Õ¥Ö€ Õ»Õ¡Õ¶',
  'Õ½Ö€Õ¿Õ«Õ¯Õ¶Õ¥Ö€ Õ»Õ¡Õ¶',
  'Õ­Õ¥Õ¬Õ¸Ö„Õ¶Õ¥Ö€Õ½',
  'Õ¡Õ¶Ö„Õ¸Ö‚Õ¶Õ¶Õ¥Ö€ Õ»Õ¡Õ¶',
];

if (hours === 23) {
  post('ğŸ™ Õ¸ÕÖ‚Õ´ Õ¯Õ¸Ö‚Õ¦Õ¥Õ¶Õ¡ÕµÕ«Ö€ Õ·Õ¶Õ¸Ö€Õ°Õ¡Õ¯Õ¡Õ¬Õ¸Ö‚Õ©Õ«Ö‚Õ¶ ÕµÕ¡ÕµÕ¿Õ¶Õ¥Õ¬');
} else if (hours === 20) {
  post('ğŸŒ¬ï¸ Õ­Õ¸Ö€Õ¨Õœ Õ·Õ¸Ö‚Õ¶Õ¹ Ö„Õ¡Õ·Õ«Ö€');
} else if (hours === 16) {
  post('ğŸ’¦ Õ´Õ« Õ´Õ¸Õ¼Õ¡ÖÕ«Ö€ Õ»Õ¸Ö‚Ö€ Õ­Õ´Õ¥Õ¬');
} else if (hours === 18) {
  post('ğŸ¦‹ Õ¾Õ¡ÕµÕ¥Õ¬Õ«ÕœÖ€ Õ¶Õ¥Ö€Õ¯Õ¡Õ¶');
} else if (hours === 14) {
  post('ğŸ§™â€â™‚ï¸ ' + getArrayElementByDayInYear(tips));
} else if (hours === 1) {
  const luna = lunarphase.Moon.lunarPhaseEmoji();
  post(
    `${luna}  Õ­Õ¡Õ²Õ¡Õ² Õ£Õ«Õ·Õ¥Ö€ Õ±Õ¥Õ¦ ` + pronouns[getRandomInt(pronouns.length - 1)]
  );
}
